<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>OrthÃ©sia â€” AccÃ¨s par classe</title>
  <link rel="stylesheet" href="assets/style.css?v=2"/>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 class="h1">OrthÃ©sia â€” AccÃ¨s par classe</h1>
          <div class="sub">Site de consultation (lecture seule). Chaque classe accÃ¨de Ã  son espace.</div>
        </div>
      </div>
      <a class="pill" href="README.html">ğŸ“˜ Guide</a>
    </div>

    <div class="grid">
      <div class="card">
        <h2 style="margin:0 0 8px">ğŸ”’ Entrer le code de ta classe</h2>
        <div class="sub" style="margin-bottom:12px">Le code ouvre uniquement lâ€™espace de ta classe.</div>

        <input id="code" class="input" placeholder="Ex : proust21" autocomplete="off" inputmode="text"/>

        <div class="row">
          <button id="go" class="btn btnPrimary" type="button">Ouvrir lâ€™espace</button>
          <button id="help" class="btn" type="button">Aide</button>
        </div>

        <div id="msg" class="hint"></div>
        <div id="warn" class="warn" style="display:none"></div>

        <div class="hint" style="margin-top:14px">
          âœ… Les Ã©lÃ¨ves peuvent consulter (lecture seule).<br/>
          âŒ Ils ne peuvent pas modifier la progression.
        </div>
      </div>

      <div class="card">
        <h2 style="margin:0 0 8px">ğŸ“Œ Codes configurÃ©s</h2>
        <div class="hint" id="codesList">â€”</div>
        <div class="hint" style="margin-top:10px">
          Note : ces codes Ã©vitent surtout un mauvais clic. Pour une sÃ©paration â€œinvioÂ­lableâ€ : ENT / Drive par groupes, etc.
        </div>
      </div>
    </div>
  </div>

  <script src="assets/config.js?v=2"></script>
  <script>
  (function(){
    const cfg = window.ORTHESIA_CONFIG || {classes:[]};
    const byCode = new Map((cfg.classes||[]).map(c => [String(c.code||"").trim().toLowerCase(), c]));
    const msg = document.getElementById("msg");
    const warn = document.getElementById("warn");

    function show(text, bad){
      if(bad){
        warn.style.display="block";
        warn.textContent=text;
        msg.textContent="";
      }else{
        warn.style.display="none";
        warn.textContent="";
        msg.textContent=text || "";
      }
    }

    document.getElementById("codesList").innerHTML =
      (cfg.classes||[]).map(c => `â€¢ <b>${c.name}</b> â†’ <code>${c.code}</code>`).join("<br>");

    function go(){
      const raw = (document.getElementById("code").value || "");
      const key = raw.trim().toLowerCase();
      if(!key){ show("â¡ï¸ Entre le code et clique sur â€œOuvrir lâ€™espaceâ€.", true); return; }
      const c = byCode.get(key);
      if(!c){ show("Code non reconnu.", true); return; }
      window.location.href = "eleve.html?c=" + encodeURIComponent(c.slug);
    }

    document.getElementById("go").addEventListener("click", go);
    document.getElementById("code").addEventListener("keydown", (e)=>{ if(e.key==="Enter") go(); });
    document.getElementById("help").addEventListener("click", ()=>{
      show("ğŸ’¡ Entre le code (ex : proust21) puis clique sur â€œOuvrir lâ€™espaceâ€.", false);
    });

    show("âœ… PrÃªt. Entre ton code.", false);
  })();
  </script>
</body>
</html>
