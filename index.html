<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrthÃ©sia â€” AccÃ¨s par classe</title>

<!-- âš ï¸ cache-bust : change v=1 Ã  v=2 si besoin -->
<link rel="stylesheet" href="assets/style.css?v=1"/>

</head>
<body>

<!-- MENU MOBILE (tiroir) -->
<nav id="sidebar" class="sidebar" aria-label="Menu">
  <div class="sidebar-header"><strong>OrthÃ©sia</strong></div>
  <a href="#" class="side-link" onclick="document.getElementById('code').focus();return false;">ğŸ” Code classe</a>
  <a href="README.html" class="side-link">ğŸ“˜ Guide</a>
</nav>

<!-- Bouton hamburger -->
<button class="hamburger" id="hamburgerBtn" type="button" aria-label="Ouvrir le menu">
  <span></span><span></span><span></span>
</button>

<!-- Overlay (fond sombre) -->
<div class="overlay" id="overlay" aria-hidden="true"></div>

<div class="container">

  <div class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1 class="h1">OrthÃ©sia â€” AccÃ¨s par classe</h1>
        <div class="sub">Site de consultation (lecture seule). Chaque classe accÃ¨de Ã  son espace.</div>
      </div>
    </div>
    <div class="pill">ğŸ“… Mis Ã  jour : 21/12/2025</div>
  </div>

  <!-- âœ… garde ton badge TEST si tu veux, sinon enlÃ¨ve-le -->
  <!-- <div style="position:fixed;left:10px;bottom:10px;z-index:99999;background:#ff0;color:#000;padding:8px 10px;border-radius:10px;font-weight:900">TEST</div> -->

  <div class="hero">
    <div class="card">
      <h2>ğŸ” Entrer le code de ta classe</h2>
      <p>Le code ouvre uniquement lâ€™espace de ta classe.</p>

      <input id="code" class="input" placeholder="Ex : PROUST-CLASSE" autocomplete="off"/>

      <div class="row" style="margin-top:12px">
        <button id="go" class="btn btnPrimary" type="button">Ouvrir lâ€™espace</button>
        <button id="help" class="btn" type="button">Aide</button>
      </div>

      <div id="msg" class="hint"></div>
      <div id="warn" class="warn" style="display:none"></div>
    </div>
  </div>

</div>

<!-- âš ï¸ cache-bust aussi sur config -->
<script src="assets/config.js?v=1"></script>

<script>
(function(){
  const cfg = window.ORTHESIA_CONFIG || {classes:[]};
  const byCode = new Map((cfg.classes||[]).map(c => [String(c.code||"").toLowerCase(), c]));
  const msg = document.getElementById("msg");
  const warn = document.getElementById("warn");

  function show(text, bad){
    warn.style.display = bad ? "block" : "none";
    warn.textContent = bad ? text : "";
    msg.textContent = bad ? "" : text;
  }

  function go(){
    const key = (document.getElementById("code").value || "").trim().toLowerCase();
    if(!key) return show("Entre le code de ta classe.", true);
    const c = byCode.get(key);
    if(!c) return show("Code non reconnu.", true);
    // âœ… relatif fiable sur GitHub Pages
    window.location.href = "eleve.html?c=" + encodeURIComponent(c.slug);

  }

  document.getElementById("go").addEventListener("click", go);
  document.getElementById("code").addEventListener("keydown", e => { if(e.key==="Enter") go(); });
  document.getElementById("help").addEventListener("click", () => show("Demande le code au professeur.", false));
})();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("hamburgerBtn");
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");
  if(!btn || !sidebar || !overlay) return;

  btn.addEventListener("click", () => {
    sidebar.classList.toggle("open");
    overlay.classList.toggle("show");
  });
  overlay.addEventListener("click", () => {
    sidebar.classList.remove("open");
    overlay.classList.remove("show");
  });
});
</script>

</body>
</html>
