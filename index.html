<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrthÃ©sia â€” AccÃ¨s par classe</title>
<link rel="stylesheet" href="assets/style.css"/>
  <style>
/* âœ… HOTFIX: empÃªche tout blocage de clic sur PC */
#code { position: relative; z-index: 10; }
.overlay { display:none; pointer-events:none; }
.hamburger { display:none; }

/* âœ… Mobile: hamburger + tiroir */
@media (max-width: 820px){
  .hamburger{
    display:inline-flex;
    position:fixed;
    top:12px; right:12px;
    z-index:9999;
    width:46px;height:46px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.16);
    background:rgba(10,16,30,.55);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    align-items:center;justify-content:center;
    gap:5px;flex-direction:column;
  }
  .hamburger span{ width:20px;height:2px; background:#fff; display:block; border-radius:2px; }

  .overlay{
    display:block;
    position:fixed; inset:0;
    z-index:9998;
    background:rgba(0,0,0,.45);
    opacity:0;
    pointer-events:none;
    transition:opacity .18s ease;
  }
  .overlay.show{ opacity:1; pointer-events:auto; }

  #sidebar{
    display:block;
    position:fixed;
    top:0; left:0;
    height:100vh;
    width:min(88vw, 360px);
    z-index:9999;
    background:rgba(10,16,30,.95);
    border-right:1px solid rgba(255,255,255,.12);
    transform:translateX(-110%);
    transition:transform .22s ease;
    overflow:auto;
  }
  #sidebar.open{ transform:translateX(0); }

  .container{ padding-top:70px; }
}
</style>

</head>

<body>

<!-- MENU MOBILE -->
<nav id="sidebar" class="sidebar">
  <div class="sidebar-header"><strong>OrthÃ©sia</strong></div>
  <a href="#" class="side-link" onclick="document.getElementById('code').focus()">ğŸ” Code classe</a>
  <a href="README.html" class="side-link">ğŸ“˜ Guide</a>
  <a href="portail_prof.html" class="side-link">ğŸ§‘â€ğŸ« Prof</a>
</nav>

<button class="hamburger" id="hamburgerBtn" aria-label="Ouvrir le menu" type="button">
  <span></span><span></span><span></span>
</button>
<div class="overlay" id="overlay"></div>

<div class="container">

<div class="topbar">
  <div class="brand">
    <div class="logo" aria-hidden="true"></div>
    <div>
      <h1 class="h1">OrthÃ©sia â€” AccÃ¨s par classe</h1>
      <div class="sub">Site de consultation (lecture seule). Chaque classe accÃ¨de Ã  son espace.</div>
    </div>
  </div>
  <div class="pill">ğŸ“… Mis Ã  jour : 21/12/2025</div>
</div>

<div class="hero">
  <div class="card">
    <h2>ğŸ” Entrer le code de ta classe</h2>
    <p>Le code ouvre uniquement lâ€™espace de ta classe.</p>
    <input id="code" class="input" placeholder="Ex : PROUST-CLASSE" autocomplete="off"/>
    <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap">
      <button id="go" class="btn btnPrimary" type="button">Ouvrir lâ€™espace</button>
      <button id="help" class="btn" type="button">Aide</button>
    </div>
    <div id="msg" class="hint"></div>
    <div id="warn" class="warn" style="display:none"></div>
  </div>
</div>

</div>

<script src="assets/config.js"></script>

<script>
(function(){
  const cfg = window.ORTHESIA_CONFIG || {classes:[]};
  const byCode = new Map(cfg.classes.map(c => [c.code.toLowerCase(), c]));
  const msg = document.getElementById("msg");
  const warn = document.getElementById("warn");

  function show(text, bad){
    warn.style.display = bad ? "block" : "none";
    warn.textContent = bad ? text : "";
    msg.textContent = bad ? "" : text;
  }

  function go(){
    const key = document.getElementById("code").value.trim().toLowerCase();
    if(!key) return show("Entre le code de ta classe.", true);
    const c = byCode.get(key);
    if(!c) return show("Code non reconnu.", true);
    window.location.href = "classes/" + c.slug + "/index.html";
  }

  document.getElementById("go").onclick = go;
  document.getElementById("code").onkeydown = e => e.key==="Enter" && go();
  document.getElementById("help").onclick = () => show("Demande le code au professeur.", false);
})();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("hamburgerBtn");
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");

  btn.onclick = () => {
    sidebar.classList.toggle("open");
    overlay.classList.toggle("show");
  };
  overlay.onclick = () => {
    sidebar.classList.remove("open");
    overlay.classList.remove("show");
  };
});
</script>

</body>
</html>

